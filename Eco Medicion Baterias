#include <math.h>

#define Res1 9500000
#define Res2 1000000
#define DivRes 0.095238

unsigned long int LEDS;
float MedicionLeds();

void setup() {
  Serial.begin(9600);
}

void loop() {
  float resultado2 = MedicionLeds();
}

float MedicionLeds(){
  int medicion = analogRead(A0);
  int calculo = (medicion*5);  //Vemos el valor de tension a la salida del divisor de tension.
  float voltaje = calculo/1023;
  float resultado = voltaje/DivRes;
  if ((resultado > 49.16) && (resultado <= 52.8)) LEDS = 225; //10 LEDS
  if ((resultado > 48.04) && (resultado <= 49.16)) LEDS = 160; //9 LEDS
  if ((resultado > 47.48) && (resultado <= 48.04)) LEDS = 140; //8 LEDS
  if ((resultado > 46.36) && (resultado <= 47.48)) LEDS = 130; //7 LEDS
  if ((resultado > 45.24) && (resultado <= 46.36)) LEDS = 110; //6 LEDS
  if ((resultado > 44.68) && (resultado <= 45.24)) LEDS = 90; //5 LEDS
  if ((resultado > 43.56) && (resultado <= 44.68)) LEDS = 80; //4 LEDS
  if ((resultado > 42.44) && (resultado <= 43.56)) LEDS = 50; //3 LEDS
  if ((resultado > 41.88) && (resultado <= 42.44)) LEDS = 40; //2 LEDS
  if ((resultado > 40.2) && (resultado <= 41.88)) LEDS = 20; //1 LED
  if ((resultado > 0) && (resultado<= 40.2)) LEDS = 0; //0 LED
  analogWrite(3, LEDS);
  Serial.println(LEDS);
  Serial.println(voltaje);
  Serial.println(resultado);  //Sacamos el valor total de las 4 baterias.
  Serial.println(medicion);
  delay(1000);
  return resultado;
}
/*
  Minimo Funcionamiento Volts: 40.2
  Si Resultado es menor a 40.2 volts, 0 Leds Prendidos.
  Si Resultado 40.2 Volts, 1 Led Prendido, 25.
  
  Maximo Volts: 52.8
  Si Resultado 52.8 Volts, 10 Leds Prendido, 180.
*/
